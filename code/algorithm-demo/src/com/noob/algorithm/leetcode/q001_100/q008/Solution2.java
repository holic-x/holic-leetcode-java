package com.noob.algorithm.leetcode.q001_100.q008;


/**
 * ğŸŸ¡ 008 å­—ç¬¦ä¸²è½¬æ•´æ•°ï¼ˆatoiï¼‰ - https://leetcode.cn/problems/string-to-integer-atoi/
 */
public class Solution2 {

    /**
     * å››ç§å­—ç¬¦çš„å¤„ç†ï¼š
     * â‘  ç©ºæ ¼ï¼šå»æ‰é¦–éƒ¨ç©ºæ ¼
     * â‘¡ ç¬¦å·ï¼šå®šä¹‰å˜é‡å­˜å‚¨ç¬¦å·ä½ï¼ˆ3ç§ï¼šæ­£ã€è´Ÿã€æ— ç¬¦å·ï¼‰
     * â‘¢ éæ•°å­—å­—ç¬¦ï¼šç›´æ¥è¿”å›
     * â‘£ æ•°å­—å­—ç¬¦ï¼šå°†æ•°å­—å­—ç¬¦è½¬åŒ–ä¸ºæ•°å­—ï¼ˆasciiç è½¬åŒ–ï¼‰ï¼Œéšåæ‹¼æ¥æ•°å­—
     */
    public int myAtoi(String s) {
        // â‘  å¤„ç†å‰åç©ºæ ¼
        s = s.trim(); // å€ŸåŠ©Stringæ–¹æ³•å¤„ç†ç©ºæ ¼
        if (s.equals("")) {
            return 0; // å»é‡åçš„å­—ç¬¦ä¸²ä¸ºç©ºåˆ™ç›´æ¥è¿”å›
        }

        // â‘¡ æ ¡éªŒç¬¦å·
        int sign = 1; // å®šä¹‰ç¬¦å·ä½
        int start = 0; // å­—ç¬¦æ ¡éªŒçš„å¼€å§‹ä½ç½®ï¼Œéœ€æ’é™¤ç¬¦å·ä½çš„å½±å“ï¼ˆå¦‚æœå­˜åœ¨ç¬¦å·ä½åˆ™å­—ç¬¦åˆ¤æ–­ä»ç¬¬2ä¸ªä½ç½®å¼€å§‹ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™æ˜¯ä»ç¬¬1ä¸ªä½ç½®å¼€å§‹ï¼‰
        long res = 0; // å®šä¹‰æ•´æ•°ç»“æœï¼Œé€šè¿‡éå†æ›´æ–°

        if (s.charAt(start) == '-') {
            sign = -1;
            start = 1; // å­˜åœ¨ç¬¦å·ä½ï¼Œä¸‹ä¸€ä¸ªéå†å…ƒç´ ä»ç¬¬2ä¸ªä½ç½®å¼€å§‹
        } else if (s.charAt(start) == '+') {
            sign = 1;
            start = 1; // å­˜åœ¨ç¬¦å·ä½ï¼Œä¸‹ä¸€ä¸ªéå†å…ƒç´ ä»ç¬¬2ä¸ªä½ç½®å¼€å§‹
        }

        // éå†å…ƒç´ 
        for (int i = start; i < s.length(); i++) {
            // æ ¡éªŒå­—ç¬¦æ˜¯å¦ä¸ºæ•°å­—å­—ç¬¦æˆ–è€…å­—æ¯å­—ç¬¦
            char curCh = s.charAt(i);
            if (!Character.isDigit(curCh)) {
                break; // é‡åˆ°éæ•°å­—å­—ç¬¦(å­—æ¯å­—ç¬¦æˆ–è€…å…¶ä»–ç¬¦å·)ç›´æ¥é€€å‡º
            } else if (Character.isDigit(curCh)) {
                // å°†æ•°å­—å­—ç¬¦è½¬åŒ–ä¸ºæ•°å­—å¹¶æ‹¼æ¥
                res = res * 10 + (curCh - '0');
                // æ ¡éªŒå€¼æ˜¯å¦è¶…å‡ºIntegerå€¼åŸŸï¼Œå¦‚æœè¶…å‡ºåˆ™ç›´æ¥è¿”å›(åˆ¤æ–­å€¼åŸŸæœ‰ä¸¤ç§ï¼Œä¸€ç§åˆ¤æ–­å€¼å¤§å°ï¼Œå¦ä¸€ç§åˆ™æ˜¯åˆ¤æ–­æ•°å­—ä½æ•°æ˜¯å¦è¶…å‡ºIntegerçš„é™å®š)
                if (res * sign > Integer.MAX_VALUE) return Integer.MAX_VALUE;
                if (res * sign < Integer.MIN_VALUE) return Integer.MIN_VALUE;
            }
        }

        return (int) res * sign;
    }

}
